'use strict';

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var share = _interopDefault(require('callbag-share'));

var index = /*#__PURE__*/
share(function (start, sink) {
  if (start !== 0) return;
  var id;

  function nextCb(ms) {
    next();
    sink(1, ms);
  }

  function next() {
    id = requestAnimationFrame(nextCb);
  }

  next();
  sink(0, function (t) {
    if (t === 2) cancelAnimationFrame(id);
  });
});

module.exports = index;
